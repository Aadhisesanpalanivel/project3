{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ABINASH\\\\OneDrive\\\\Desktop\\\\Event_manage_wind\\\\src\\\\context\\\\EventContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventContext = /*#__PURE__*/createContext();\nexport const useEvents = () => {\n  _s();\n  const context = useContext(EventContext);\n  if (!context) {\n    throw new Error('useEvents must be used within an EventProvider');\n  }\n  return context;\n};\n_s(useEvents, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const EventProvider = ({\n  children\n}) => {\n  _s2();\n  const [events, setEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    currentUser\n  } = useAuth();\n  const fetchEvents = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('http://localhost:5000/api/events');\n      setEvents(response.data);\n      setError(null);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to fetch events');\n      setEvents([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchEvents();\n  }, []);\n  const createEvent = async eventData => {\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.post('http://localhost:5000/api/events', eventData, config);\n      setEvents(prevEvents => [...prevEvents, response.data]);\n      return response.data;\n    } catch (err) {\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const registerForEvent = async eventId => {\n    try {\n      const config = {\n        headers: {\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.post(`http://localhost:5000/api/events/${eventId}/register`, {}, config);\n      setEvents(prevEvents => prevEvents.map(event => event._id === eventId ? response.data : event));\n      return response.data;\n    } catch (err) {\n      throw err;\n    }\n  };\n  const unregisterFromEvent = async eventId => {\n    try {\n      const config = {\n        headers: {\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.post(`http://localhost:5000/api/events/${eventId}/unregister`, {}, config);\n      setEvents(prevEvents => prevEvents.map(event => event._id === eventId ? response.data : event));\n      return response.data;\n    } catch (err) {\n      throw err;\n    }\n  };\n  const updateEvent = async (eventId, eventData) => {\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.put(`http://localhost:5000/api/events/${eventId}`, eventData, config);\n      setEvents(prevEvents => prevEvents.map(event => event._id === eventId ? response.data : event));\n      return response.data;\n    } catch (err) {\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deleteEvent = async eventId => {\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      await axios.delete(`http://localhost:5000/api/events/${eventId}`, config);\n      setEvents(prevEvents => prevEvents.filter(event => event._id !== eventId));\n    } catch (err) {\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getUserEvents = async () => {\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.get('http://localhost:5000/api/events/user', config);\n      return response.data;\n    } catch (err) {\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const value = {\n    events,\n    loading,\n    error,\n    fetchEvents,\n    createEvent,\n    updateEvent,\n    deleteEvent,\n    registerForEvent,\n    unregisterFromEvent,\n    getUserEvents\n  };\n  return /*#__PURE__*/_jsxDEV(EventContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 9\n  }, this);\n};\n_s2(EventProvider, \"pZii3IX3HpzuuNvPVLbSaB7e/+U=\", false, function () {\n  return [useAuth];\n});\n_c = EventProvider;\nexport default EventContext;\nvar _c;\n$RefreshReg$(_c, \"EventProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","useAuth","jsxDEV","_jsxDEV","EventContext","useEvents","_s","context","Error","EventProvider","children","_s2","events","setEvents","loading","setLoading","error","setError","currentUser","fetchEvents","response","get","data","err","_err$response","_err$response$data","message","createEvent","eventData","config","headers","token","post","prevEvents","registerForEvent","eventId","map","event","_id","unregisterFromEvent","updateEvent","put","deleteEvent","delete","filter","getUserEvents","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ABINASH/OneDrive/Desktop/Event_manage_wind/src/context/EventContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\n\nconst EventContext = createContext();\n\nexport const useEvents = () => {\n    const context = useContext(EventContext);\n    if (!context) {\n        throw new Error('useEvents must be used within an EventProvider');\n    }\n    return context;\n};\n\nexport const EventProvider = ({ children }) => {\n    const [events, setEvents] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const { currentUser } = useAuth();\n\n    const fetchEvents = async () => {\n        try {\n            setLoading(true);\n            const response = await axios.get('http://localhost:5000/api/events');\n            setEvents(response.data);\n            setError(null);\n        } catch (err) {\n            setError(err.response?.data?.message || 'Failed to fetch events');\n            setEvents([]);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchEvents();\n    }, []);\n\n    const createEvent = async (eventData) => {\n        try {\n            setLoading(true);\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.post(\n                'http://localhost:5000/api/events',\n                eventData,\n                config\n            );\n\n            setEvents(prevEvents => [...prevEvents, response.data]);\n            return response.data;\n        } catch (err) {\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const registerForEvent = async (eventId) => {\n        try {\n            const config = {\n                headers: {\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.post(\n                `http://localhost:5000/api/events/${eventId}/register`,\n                {},\n                config\n            );\n\n            setEvents(prevEvents =>\n                prevEvents.map(event =>\n                    event._id === eventId ? response.data : event\n                )\n            );\n\n            return response.data;\n        } catch (err) {\n            throw err;\n        }\n    };\n\n    const unregisterFromEvent = async (eventId) => {\n        try {\n            const config = {\n                headers: {\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.post(\n                `http://localhost:5000/api/events/${eventId}/unregister`,\n                {},\n                config\n            );\n\n            setEvents(prevEvents =>\n                prevEvents.map(event =>\n                    event._id === eventId ? response.data : event\n                )\n            );\n\n            return response.data;\n        } catch (err) {\n            throw err;\n        }\n    };\n\n    const updateEvent = async (eventId, eventData) => {\n        try {\n            setLoading(true);\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.put(\n                `http://localhost:5000/api/events/${eventId}`,\n                eventData,\n                config\n            );\n\n            setEvents(prevEvents =>\n                prevEvents.map(event =>\n                    event._id === eventId ? response.data : event\n                )\n            );\n\n            return response.data;\n        } catch (err) {\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const deleteEvent = async (eventId) => {\n        try {\n            setLoading(true);\n            const config = {\n                headers: {\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            await axios.delete(\n                `http://localhost:5000/api/events/${eventId}`,\n                config\n            );\n\n            setEvents(prevEvents =>\n                prevEvents.filter(event => event._id !== eventId)\n            );\n        } catch (err) {\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const getUserEvents = async () => {\n        try {\n            setLoading(true);\n            const config = {\n                headers: {\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.get(\n                'http://localhost:5000/api/events/user',\n                config\n            );\n\n            return response.data;\n        } catch (err) {\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const value = {\n        events,\n        loading,\n        error,\n        fetchEvents,\n        createEvent,\n        updateEvent,\n        deleteEvent,\n        registerForEvent,\n        unregisterFromEvent,\n        getUserEvents\n    };\n\n    return (\n        <EventContext.Provider value={value}>\n            {children}\n        </EventContext.Provider>\n    );\n};\n\nexport default EventContext;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,YAAY,gBAAGR,aAAa,CAAC,CAAC;AAEpC,OAAO,MAAMS,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAMC,OAAO,GAAGV,UAAU,CAACO,YAAY,CAAC;EACxC,IAAI,CAACG,OAAO,EAAE;IACV,MAAM,IAAIC,KAAK,CAAC,gDAAgD,CAAC;EACrE;EACA,OAAOD,OAAO;AAClB,CAAC;AAACD,EAAA,CANWD,SAAS;AAQtB,OAAO,MAAMI,aAAa,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAC3C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM;IAAEoB;EAAY,CAAC,GAAGjB,OAAO,CAAC,CAAC;EAEjC,MAAMkB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACAJ,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMK,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,GAAG,CAAC,kCAAkC,CAAC;MACpER,SAAS,CAACO,QAAQ,CAACE,IAAI,CAAC;MACxBL,QAAQ,CAAC,IAAI,CAAC;IAClB,CAAC,CAAC,OAAOM,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACVR,QAAQ,CAAC,EAAAO,aAAA,GAAAD,GAAG,CAACH,QAAQ,cAAAI,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcF,IAAI,cAAAG,kBAAA,uBAAlBA,kBAAA,CAAoBC,OAAO,KAAI,wBAAwB,CAAC;MACjEb,SAAS,CAAC,EAAE,CAAC;IACjB,CAAC,SAAS;MACNE,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAEDhB,SAAS,CAAC,MAAM;IACZoB,WAAW,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,WAAW,GAAG,MAAOC,SAAS,IAAK;IACrC,IAAI;MACAb,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMc,MAAM,GAAG;QACXC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAUZ,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEa,KAAK;QACjD;MACJ,CAAC;MAED,MAAMX,QAAQ,GAAG,MAAMpB,KAAK,CAACgC,IAAI,CAC7B,kCAAkC,EAClCJ,SAAS,EACTC,MACJ,CAAC;MAEDhB,SAAS,CAACoB,UAAU,IAAI,CAAC,GAAGA,UAAU,EAAEb,QAAQ,CAACE,IAAI,CAAC,CAAC;MACvD,OAAOF,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACV,MAAMA,GAAG;IACb,CAAC,SAAS;MACNR,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAMmB,gBAAgB,GAAG,MAAOC,OAAO,IAAK;IACxC,IAAI;MACA,MAAMN,MAAM,GAAG;QACXC,OAAO,EAAE;UACL,eAAe,EAAE,UAAUZ,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEa,KAAK;QACjD;MACJ,CAAC;MAED,MAAMX,QAAQ,GAAG,MAAMpB,KAAK,CAACgC,IAAI,CAC7B,oCAAoCG,OAAO,WAAW,EACtD,CAAC,CAAC,EACFN,MACJ,CAAC;MAEDhB,SAAS,CAACoB,UAAU,IAChBA,UAAU,CAACG,GAAG,CAACC,KAAK,IAChBA,KAAK,CAACC,GAAG,KAAKH,OAAO,GAAGf,QAAQ,CAACE,IAAI,GAAGe,KAC5C,CACJ,CAAC;MAED,OAAOjB,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACV,MAAMA,GAAG;IACb;EACJ,CAAC;EAED,MAAMgB,mBAAmB,GAAG,MAAOJ,OAAO,IAAK;IAC3C,IAAI;MACA,MAAMN,MAAM,GAAG;QACXC,OAAO,EAAE;UACL,eAAe,EAAE,UAAUZ,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEa,KAAK;QACjD;MACJ,CAAC;MAED,MAAMX,QAAQ,GAAG,MAAMpB,KAAK,CAACgC,IAAI,CAC7B,oCAAoCG,OAAO,aAAa,EACxD,CAAC,CAAC,EACFN,MACJ,CAAC;MAEDhB,SAAS,CAACoB,UAAU,IAChBA,UAAU,CAACG,GAAG,CAACC,KAAK,IAChBA,KAAK,CAACC,GAAG,KAAKH,OAAO,GAAGf,QAAQ,CAACE,IAAI,GAAGe,KAC5C,CACJ,CAAC;MAED,OAAOjB,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACV,MAAMA,GAAG;IACb;EACJ,CAAC;EAED,MAAMiB,WAAW,GAAG,MAAAA,CAAOL,OAAO,EAAEP,SAAS,KAAK;IAC9C,IAAI;MACAb,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMc,MAAM,GAAG;QACXC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAUZ,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEa,KAAK;QACjD;MACJ,CAAC;MAED,MAAMX,QAAQ,GAAG,MAAMpB,KAAK,CAACyC,GAAG,CAC5B,oCAAoCN,OAAO,EAAE,EAC7CP,SAAS,EACTC,MACJ,CAAC;MAEDhB,SAAS,CAACoB,UAAU,IAChBA,UAAU,CAACG,GAAG,CAACC,KAAK,IAChBA,KAAK,CAACC,GAAG,KAAKH,OAAO,GAAGf,QAAQ,CAACE,IAAI,GAAGe,KAC5C,CACJ,CAAC;MAED,OAAOjB,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACV,MAAMA,GAAG;IACb,CAAC,SAAS;MACNR,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAM2B,WAAW,GAAG,MAAOP,OAAO,IAAK;IACnC,IAAI;MACApB,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMc,MAAM,GAAG;QACXC,OAAO,EAAE;UACL,eAAe,EAAE,UAAUZ,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEa,KAAK;QACjD;MACJ,CAAC;MAED,MAAM/B,KAAK,CAAC2C,MAAM,CACd,oCAAoCR,OAAO,EAAE,EAC7CN,MACJ,CAAC;MAEDhB,SAAS,CAACoB,UAAU,IAChBA,UAAU,CAACW,MAAM,CAACP,KAAK,IAAIA,KAAK,CAACC,GAAG,KAAKH,OAAO,CACpD,CAAC;IACL,CAAC,CAAC,OAAOZ,GAAG,EAAE;MACV,MAAMA,GAAG;IACb,CAAC,SAAS;MACNR,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAM8B,aAAa,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACA9B,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMc,MAAM,GAAG;QACXC,OAAO,EAAE;UACL,eAAe,EAAE,UAAUZ,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEa,KAAK;QACjD;MACJ,CAAC;MAED,MAAMX,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,GAAG,CAC5B,uCAAuC,EACvCQ,MACJ,CAAC;MAED,OAAOT,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACV,MAAMA,GAAG;IACb,CAAC,SAAS;MACNR,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAM+B,KAAK,GAAG;IACVlC,MAAM;IACNE,OAAO;IACPE,KAAK;IACLG,WAAW;IACXQ,WAAW;IACXa,WAAW;IACXE,WAAW;IACXR,gBAAgB;IAChBK,mBAAmB;IACnBM;EACJ,CAAC;EAED,oBACI1C,OAAA,CAACC,YAAY,CAAC2C,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAApC,QAAA,EAC/BA;EAAQ;IAAAsC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACU,CAAC;AAEhC,CAAC;AAACxC,GAAA,CAnMWF,aAAa;EAAA,QAIER,OAAO;AAAA;AAAAmD,EAAA,GAJtB3C,aAAa;AAqM1B,eAAeL,YAAY;AAAC,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}