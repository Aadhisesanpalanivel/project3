{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ABINASH\\\\OneDrive\\\\Desktop\\\\Event_manage_wind\\\\src\\\\context\\\\EventContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventContext = /*#__PURE__*/createContext();\nexport const useEvents = () => {\n  _s();\n  const context = useContext(EventContext);\n  if (!context) {\n    throw new Error('useEvents must be used within an EventProvider');\n  }\n  return context;\n};\n_s(useEvents, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const EventProvider = ({\n  children\n}) => {\n  _s2();\n  const [events, setEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    currentUser\n  } = useAuth();\n  const fetchEvents = async () => {\n    try {\n      setLoading(true);\n      console.log('Fetching events...');\n      const response = await axios.get('http://localhost:5000/api/events');\n      console.log('Events fetched:', response.data);\n      setEvents(response.data);\n      setError(null);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error fetching events:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to fetch events');\n      setEvents([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchEvents();\n  }, []);\n  const createEvent = async eventData => {\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n\n      // Ensure all required fields are present\n      if (!eventData.title || !eventData.date || !eventData.time || !eventData.location || !eventData.category || !eventData.description) {\n        throw new Error('All fields are required.');\n      }\n      const response = await axios.post('http://localhost:5000/api/', eventData, config);\n      setEvents(prevEvents => [...prevEvents, response.data]);\n      return response.data;\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Error adding event:', err);\n      setError('Failed to create event: ' + (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message));\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const registerForEvent = async eventId => {\n    try {\n      const config = {\n        headers: {\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.post(`http://localhost:5000/api/events/${eventId}/register`, {}, config);\n      setEvents(prevEvents => prevEvents.map(event => event._id === eventId ? response.data : event));\n      return response.data;\n    } catch (err) {\n      throw err;\n    }\n  };\n  const unregisterFromEvent = async eventId => {\n    try {\n      const config = {\n        headers: {\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.post(`http://localhost:5000/api/events/${eventId}/unregister`, {}, config);\n      setEvents(prevEvents => prevEvents.map(event => event._id === eventId ? response.data : event));\n      return response.data;\n    } catch (err) {\n      throw err;\n    }\n  };\n  const updateEvent = async (eventId, eventData) => {\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.put(`http://localhost:5000/api/events/${eventId}`, eventData, config);\n      setEvents(prevEvents => prevEvents.map(event => event._id === eventId ? response.data : event));\n      return response.data;\n    } catch (err) {\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deleteEvent = async eventId => {\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      await axios.delete(`http://localhost:5000/api/events/${eventId}`, config);\n      setEvents(prevEvents => prevEvents.filter(event => event._id !== eventId));\n    } catch (err) {\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getUserEvents = async () => {\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          'Authorization': `Bearer ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.token}`\n        }\n      };\n      const response = await axios.get('http://localhost:5000/api/events/user', config);\n      return response.data;\n    } catch (err) {\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const value = {\n    events,\n    loading,\n    error,\n    fetchEvents,\n    createEvent,\n    updateEvent,\n    deleteEvent,\n    registerForEvent,\n    unregisterFromEvent,\n    getUserEvents\n  };\n  return /*#__PURE__*/_jsxDEV(EventContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 9\n  }, this);\n};\n_s2(EventProvider, \"pZii3IX3HpzuuNvPVLbSaB7e/+U=\", false, function () {\n  return [useAuth];\n});\n_c = EventProvider;\nexport default EventContext;\nvar _c;\n$RefreshReg$(_c, \"EventProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","useAuth","jsxDEV","_jsxDEV","EventContext","useEvents","_s","context","Error","EventProvider","children","_s2","events","setEvents","loading","setLoading","error","setError","currentUser","fetchEvents","console","log","response","get","data","err","_err$response","_err$response$data","message","createEvent","eventData","config","headers","title","date","time","location","category","description","post","prevEvents","_err$response2","_err$response2$data","registerForEvent","eventId","token","map","event","_id","unregisterFromEvent","updateEvent","put","deleteEvent","delete","filter","getUserEvents","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ABINASH/OneDrive/Desktop/Event_manage_wind/src/context/EventContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\n\nconst EventContext = createContext();\n\nexport const useEvents = () => {\n    const context = useContext(EventContext);\n    if (!context) {\n        throw new Error('useEvents must be used within an EventProvider');\n    }\n    return context;\n};\n\nexport const EventProvider = ({ children }) => {\n    const [events, setEvents] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const { currentUser } = useAuth();\n\n    const fetchEvents = async () => {\n        try {\n            setLoading(true);\n            console.log('Fetching events...');\n            const response = await axios.get('http://localhost:5000/api/events');\n            console.log('Events fetched:', response.data);\n            setEvents(response.data);\n            setError(null);\n        } catch (err) {\n            console.error('Error fetching events:', err);\n            setError(err.response?.data?.message || 'Failed to fetch events');\n            setEvents([]);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchEvents();\n    }, []);\n\n    const createEvent = async (eventData) => {\n        try {\n            setLoading(true);\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            };\n\n            // Ensure all required fields are present\n            if (!eventData.title || !eventData.date || !eventData.time || !eventData.location || !eventData.category || !eventData.description) {\n                throw new Error('All fields are required.');\n            }\n\n            const response = await axios.post(\n                'http://localhost:5000/api/',\n                eventData,\n                config\n            );\n\n            setEvents(prevEvents => [...prevEvents, response.data]);\n            return response.data;\n        } catch (err) {\n            console.error('Error adding event:', err);\n            setError('Failed to create event: ' + (err.response?.data?.message || err.message));\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const registerForEvent = async (eventId) => {\n        try {\n            const config = {\n                headers: {\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.post(\n                `http://localhost:5000/api/events/${eventId}/register`,\n                {},\n                config\n            );\n\n            setEvents(prevEvents =>\n                prevEvents.map(event =>\n                    event._id === eventId ? response.data : event\n                )\n            );\n\n            return response.data;\n        } catch (err) {\n            throw err;\n        }\n    };\n\n    const unregisterFromEvent = async (eventId) => {\n        try {\n            const config = {\n                headers: {\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.post(\n                `http://localhost:5000/api/events/${eventId}/unregister`,\n                {},\n                config\n            );\n\n            setEvents(prevEvents =>\n                prevEvents.map(event =>\n                    event._id === eventId ? response.data : event\n                )\n            );\n\n            return response.data;\n        } catch (err) {\n            throw err;\n        }\n    };\n\n    const updateEvent = async (eventId, eventData) => {\n        try {\n            setLoading(true);\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.put(\n                `http://localhost:5000/api/events/${eventId}`,\n                eventData,\n                config\n            );\n\n            setEvents(prevEvents =>\n                prevEvents.map(event =>\n                    event._id === eventId ? response.data : event\n                )\n            );\n\n            return response.data;\n        } catch (err) {\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const deleteEvent = async (eventId) => {\n        try {\n            setLoading(true);\n            const config = {\n                headers: {\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            await axios.delete(\n                `http://localhost:5000/api/events/${eventId}`,\n                config\n            );\n\n            setEvents(prevEvents =>\n                prevEvents.filter(event => event._id !== eventId)\n            );\n        } catch (err) {\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const getUserEvents = async () => {\n        try {\n            setLoading(true);\n            const config = {\n                headers: {\n                    'Authorization': `Bearer ${currentUser?.token}`\n                }\n            };\n\n            const response = await axios.get(\n                'http://localhost:5000/api/events/user',\n                config\n            );\n\n            return response.data;\n        } catch (err) {\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const value = {\n        events,\n        loading,\n        error,\n        fetchEvents,\n        createEvent,\n        updateEvent,\n        deleteEvent,\n        registerForEvent,\n        unregisterFromEvent,\n        getUserEvents\n    };\n\n    return (\n        <EventContext.Provider value={value}>\n            {children}\n        </EventContext.Provider>\n    );\n};\n\nexport default EventContext;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}