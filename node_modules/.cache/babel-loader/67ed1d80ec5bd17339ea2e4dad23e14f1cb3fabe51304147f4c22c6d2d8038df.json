{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ABINASH\\\\OneDrive\\\\Desktop\\\\Event_manage_wind\\\\src\\\\context\\\\AuthContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nconst API_URL = 'http://localhost:5000/api';\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Set axios default header with token\n  const setAuthToken = token => {\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      localStorage.setItem('token', token);\n    } else {\n      delete axios.defaults.headers.common['Authorization'];\n      localStorage.removeItem('token');\n    }\n  };\n\n  // Check if user is logged in on mount\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      setAuthToken(token);\n      checkAuthStatus();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n  const checkAuthStatus = async () => {\n    try {\n      const response = await axios.get(`${API_URL}/auth/me`);\n      setCurrentUser(response.data);\n      setError(null);\n    } catch (error) {\n      console.error('Auth check failed:', error);\n      logout();\n    } finally {\n      setLoading(false);\n    }\n  };\n  const register = async userData => {\n    try {\n      const response = await axios.post(`${API_URL}/auth/register`, userData);\n      const {\n        token,\n        user\n      } = response.data;\n      setAuthToken(token);\n      setCurrentUser(user);\n      setError(null);\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Registration failed');\n      throw error;\n    }\n  };\n  const login = async credentials => {\n    try {\n      const response = await axios.post(`${API_URL}/auth/login`, credentials);\n      const {\n        token,\n        user\n      } = response.data;\n      setAuthToken(token);\n      setCurrentUser(user);\n      setError(null);\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      setError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Login failed');\n      throw error;\n    }\n  };\n  const logout = () => {\n    setAuthToken(null);\n    setCurrentUser(null);\n    setError(null);\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      currentUser,\n      loading,\n      error,\n      register,\n      login,\n      logout,\n      isAuthenticated: !!currentUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthProvider, \"JNizP9FwoqjqDhcaQoKbEEqEJbk=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsxDEV","_jsxDEV","AuthContext","API_URL","AuthProvider","children","_s","currentUser","setCurrentUser","loading","setLoading","error","setError","setAuthToken","token","defaults","headers","common","localStorage","setItem","removeItem","getItem","checkAuthStatus","response","get","data","console","logout","register","userData","post","user","_error$response","_error$response$data","message","login","credentials","_error$response2","_error$response2$data","Provider","value","isAuthenticated","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/ABINASH/OneDrive/Desktop/Event_manage_wind/src/context/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst AuthContext = createContext();\nconst API_URL = 'http://localhost:5000/api';\n\nexport const AuthProvider = ({ children }) => {\n    const [currentUser, setCurrentUser] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    // Set axios default header with token\n    const setAuthToken = (token) => {\n        if (token) {\n            axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n            localStorage.setItem('token', token);\n        } else {\n            delete axios.defaults.headers.common['Authorization'];\n            localStorage.removeItem('token');\n        }\n    };\n\n    // Check if user is logged in on mount\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            setAuthToken(token);\n            checkAuthStatus();\n        } else {\n            setLoading(false);\n        }\n    }, []);\n\n    const checkAuthStatus = async () => {\n        try {\n            const response = await axios.get(`${API_URL}/auth/me`);\n            setCurrentUser(response.data);\n            setError(null);\n        } catch (error) {\n            console.error('Auth check failed:', error);\n            logout();\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const register = async (userData) => {\n        try {\n            const response = await axios.post(`${API_URL}/auth/register`, userData);\n            const { token, user } = response.data;\n            setAuthToken(token);\n            setCurrentUser(user);\n            setError(null);\n            return response.data;\n        } catch (error) {\n            setError(error.response?.data?.message || 'Registration failed');\n            throw error;\n        }\n    };\n\n    const login = async (credentials) => {\n        try {\n            const response = await axios.post(`${API_URL}/auth/login`, credentials);\n            const { token, user } = response.data;\n            setAuthToken(token);\n            setCurrentUser(user);\n            setError(null);\n            return response.data;\n        } catch (error) {\n            setError(error.response?.data?.message || 'Login failed');\n            throw error;\n        }\n    };\n\n    const logout = () => {\n        setAuthToken(null);\n        setCurrentUser(null);\n        setError(null);\n    };\n\n    return (\n        <AuthContext.Provider value={{\n            currentUser,\n            loading,\n            error,\n            register,\n            login,\n            logout,\n            isAuthenticated: !!currentUser\n        }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport const useAuth = () => {\n    const context = useContext(AuthContext);\n    if (!context) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}